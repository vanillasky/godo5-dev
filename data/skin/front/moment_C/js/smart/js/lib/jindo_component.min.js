jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var b=this.constructor.getInstance();b.push(this);this._htEventHandler={};this._htOption={};this._htOption._htSetter={}},option:function(f,d){switch(typeof f){case"undefined":return this._htOption;case"string":if(typeof d!="undefined"){if(f=="htCustomEventHandler"){if(typeof this._htOption[f]=="undefined"){this.attach(d)}else{return this}}this._htOption[f]=d;if(typeof this._htOption._htSetter[f]=="function"){this._htOption._htSetter[f](d)}}else{return this._htOption[f]}break;case"object":for(var e in f){if(e=="htCustomEventHandler"){if(typeof this._htOption[e]=="undefined"){this.attach(f[e])}else{continue}}this._htOption[e]=f[e];if(typeof this._htOption._htSetter[e]=="function"){this._htOption._htSetter[e](f[e])}}break}return this},optionSetter:function(f,e){switch(typeof f){case"undefined":return this._htOption._htSetter;case"string":if(typeof e!="undefined"){this._htOption._htSetter[f]=jindo.$Fn(e,this).bind()}else{return this._htOption._htSetter[f]}break;case"object":for(var d in f){this._htOption._htSetter[d]=jindo.$Fn(f[d],this).bind()}break}return this},fireEvent:function(s,i){i=i||{};var q=this["on"+s],r=this._htEventHandler[s]||[],m=typeof q=="function",n=r.length>0;if(!m&&!n){return true}r=r.concat();i.sType=s;if(typeof i._aExtend=="undefined"){i._aExtend=[];i.stop=function(){if(i._aExtend.length>0){i._aExtend[i._aExtend.length-1].bCanceled=true}}}i._aExtend.push({sType:s,bCanceled:false});var o=[i],p,l;for(p=2,l=arguments.length;p<l;p++){o.push(arguments[p])}if(m){q.apply(this,o)}if(n){var t;for(p=0,t;(t=r[p]);p++){t.apply(this,o)}}return !i._aExtend.pop().bCanceled},attach:function(f,e){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(b,a){this.attach(a,b)},this).bind());return this}var d=this._htEventHandler[f];if(typeof d=="undefined"){d=this._htEventHandler[f]=[]}d.push(e);return this},detach:function(h,f){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(b,a){this.detach(a,b)},this).bind());return this}var i=this._htEventHandler[h];if(i){for(var g=0,j;(j=i[g]);g++){if(j===f){i=i.splice(g,1);break}}}return this},detachAll:function(f){var d=this._htEventHandler;if(arguments.length){if(typeof d[f]=="undefined"){return this}delete d[f];return this}for(var e in d){delete d[e]}return this}});jindo.Component.factory=function(g,i){var l=[],h;if(typeof i=="undefined"){i={}}for(var k=0,j;(j=g[k]);k++){h=new this(j,i);l[l.length]=h}return l};jindo.Component.getInstance=function(){if(typeof this._aInstance=="undefined"){this._aInstance=[]}return this._aInstance};jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()}return this}}).extend(jindo.Component);jindo.RolloverArea=jindo.$Class({$init:function(d,c){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:true,bActivateOnload:true,htStatus:{sOver:"over",sDown:"down"}});this.option(c||{});this._elArea=jindo.$(d);this._aOveredElements=[];this._aDownedElements=[];this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);if(this.option("bActivateOnload")){this.activate()}},_addOvered:function(b){this._aOveredElements.push(b)},_removeOvered:function(b){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(b),1)},_addStatus:function(c,d){jindo.$Element(c).addClass(this.option("sClassPrefix")+d)},_removeStatus:function(c,d){jindo.$Element(c).removeClass(this.option("sClassPrefix")+d)},_isInnerElement:function(d,c){return d===c?true:jindo.$Element(d).isParentOf(c)},_onActivate:function(){this._wfMouseOver.attach(this._elArea,"mouseover");this._wfMouseOut.attach(this._elArea,"mouseout");if(this.option("bCheckMouseDown")){this._wfMouseDown.attach(this._elArea,"mousedown");this._wfMouseUp.attach(document,"mouseup")}},_onDeactivate:function(){this._wfMouseOver.detach(this._elArea,"mouseover");this._wfMouseOut.detach(this._elArea,"mouseout");this._wfMouseDown.detach(this._elArea,"mousedown");this._wfMouseUp.detach(document,"mouseup");this._aOveredElements.length=0;this._aDownedElements.length=0},_findRollover:function(c){var d=this.option("sClassName");return jindo.$$.test(c,"."+d)?c:jindo.$$.getSingle("! ."+d,c)},_onMouseOver:function(f){var h=f.element,e=f.relatedElement,g;for(;h=this._findRollover(h);h=h.parentNode){if(e&&this._isInnerElement(h,e)){continue}this._addOvered(h);g={element:h,htStatus:this.option("htStatus"),weEvent:f};if(this.fireEvent("over",g)){this._addStatus(g.element,g.htStatus.sOver)}}},_onMouseOut:function(f){var h=f.element,e=f.relatedElement,g;for(;h=this._findRollover(h);h=h.parentNode){if(e&&this._isInnerElement(h,e)){continue}this._removeOvered(h);g={element:h,htStatus:this.option("htStatus"),weEvent:f};if(this.fireEvent("out",g)){this._removeStatus(g.element,g.htStatus.sOver)}}},_onMouseDown:function(e){var d=e.element,f;while(d=this._findRollover(d)){f={element:d,htStatus:this.option("htStatus"),weEvent:e};this._aDownedElements.push(d);if(this.fireEvent("down",f)){this._addStatus(f.element,f.htStatus.sDown)}d=d.parentNode}},_onMouseUp:function(n){var l=n.element,k=[],i=this._aDownedElements,j,m,h;for(h=0;m=i[h];h++){k.push({element:m,htStatus:this.option("htStatus"),weEvent:n})}for(;l=this._findRollover(l);l=l.parentNode){if(jindo.$A(i).indexOf(l)>-1){continue}k.push({element:l,htStatus:this.option("htStatus"),weEvent:n})}for(h=0;j=k[h];h++){if(this.fireEvent("up",j)){this._removeStatus(j.element,j.htStatus.sDown)}}this._aDownedElements=[]}}).extend(jindo.UIComponent);jindo.Calendar=jindo.$Class({$init:function(d,c){this._htToday=this.constructor.getDateHashTable(new Date());this._elLayer=jindo.$(d);this.htDefaultOption={sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:true};this.option(this.htDefaultOption);this.option(c||{});this._assignHTMLElements();this.activate();this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate"));if(this.option("bDrawOnload")){this.draw()}},getBaseElement:function(){return this._elLayer},getDate:function(){return this._htDate},getDateOfElement:function(c){var d=jindo.$A(this._aDateContainerElement).indexOf(c);if(d>-1){return this._aMetaData[d]}return null},getToday:function(){return this._htToday},setDate:function(d,f,e){this._htDate={nYear:d,nMonth:(f*1),nDate:(e*1)}},getShownDate:function(){return this._getShownDate()},_getShownDate:function(){return this.htShownDate||this.getDate()},_setShownDate:function(d,c){this.htShownDate={nYear:d,nMonth:(c*1),nDate:1}},_assignHTMLElements:function(){var f=this.option("sClassPrefix"),d=this.getBaseElement();if((this.elBtnPrevYear=jindo.$$.getSingle(("."+f+"btn-prev-year"),d))){this.wfPrevYear=jindo.$Fn(function(a){a.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(-1,0,true)},this)}if((this.elBtnPrevMonth=jindo.$$.getSingle(("."+f+"btn-prev-mon"),d))){this.wfPrevMonth=jindo.$Fn(function(a){a.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,-1,true)},this)}if((this.elBtnNextMonth=jindo.$$.getSingle(("."+f+"btn-next-mon"),d))){this.wfNextMonth=jindo.$Fn(function(a){a.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,1,true)},this)}if((this.elBtnNextYear=jindo.$$.getSingle(("."+f+"btn-next-year"),d))){this.wfNextYear=jindo.$Fn(function(a){a.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(1,0,true)},this)}this.elTitle=jindo.$$.getSingle(("."+f+"title"),d);this.elTitleYear=jindo.$$.getSingle(("."+f+"title-year"),d);this.elTitleMonth=jindo.$$.getSingle(("."+f+"title-month"),d);var e=jindo.$$.getSingle("."+f+"week",d);this.elWeekTemplate=e.cloneNode(true);this.elWeekAppendTarget=e.parentNode},_setCalendarTitle:function(g,l,i){if(l<10){l=("0"+(l*1)).toString()}var k=this.elTitle,j=this.option("sTitleFormat"),h;if(typeof i!="undefined"){switch(i){case"year":k=this.elTitleYear;j=this.option("sYearTitleFormat");h=j.replace(/yyyy/g,g).replace(/y/g,(g).toString().substr(2,2));break;case"month":k=this.elTitleMonth;j=this.option("sMonthTitleFormat");h=j.replace(/mm/g,l).replace(/m/g,(l*1)).replace(/M/g,this.option("aMonthTitle")[l-1]);break}}else{h=j.replace(/yyyy/g,g).replace(/y/g,(g).toString().substr(2,2)).replace(/mm/g,l).replace(/m/g,(l*1)).replace(/M/g,this.option("aMonthTitle")[l-1])}jindo.$Element(k).text(h)},draw:function(L,H,Z){var N=this.option("sClassPrefix"),P=this.getDate(),R=this._getShownDate();if(R&&typeof Z!="undefined"&&Z){var D=this.constructor.getRelativeDate(L,H,0,R);L=D.nYear;H=D.nMonth}else{if(typeof L=="undefined"&&typeof H=="undefined"&&typeof Z=="undefined"){L=P.nYear;H=P.nMonth}else{L=L||R.nYear;H=H||R.nMonth}}if(this.fireEvent("beforeDraw",{nYear:L,nMonth:H})){if(this.elTitle){this._setCalendarTitle(L,H)}if(this.elTitleYear){this._setCalendarTitle(L,H,"year")}if(this.elTitleMonth){this._setCalendarTitle(L,H,"month")}this._clear(jindo.Calendar.getWeeks(L,H));this._setShownDate(L,H);var V=this.getToday(),Q=this.constructor.getFirstDay(L,H),J=this.constructor.getLastDay(L,H),i=this.constructor.getLastDate(L,H),O=0,W=this.constructor.getRelativeDate(0,-1,0,{nYear:L,nMonth:H,nDate:1}),T=this.constructor.getRelativeDate(0,1,0,{nYear:L,nMonth:H,nDate:1}),E=this.constructor.getLastDate(W.nYear,W.nMonth),K=[],I,G,B,Y,S,U,M,C,F;var X=this.constructor.getWeeks(L,H);for(F=0;F<X;F++){C=this.elWeekTemplate.cloneNode(true);jindo.$Element(C).appendTo(this.elWeekAppendTarget);this._aWeekElement.push(C)}this._aDateElement=jindo.$$("."+N+"date",this.elWeekAppendTarget);this._aDateContainerElement=jindo.$$("."+N+"week > *",this.elWeekAppendTarget);if(Q>0){for(F=E-Q;F<E;F++){K.push(F+1)}}for(F=1;F<i+1;F++){K.push(F)}M=K.length-1;for(F=1;F<7-J;F++){K.push(F)}for(F=0;F<K.length;F++){I=false;G=false;B=jindo.$Element(this._aDateContainerElement[F]);Y=L;S=H;if(F<Q){I=true;B.addClass(N+"prev-mon");Y=W.nYear;S=W.nMonth}else{if(F>M){G=true;B.addClass(N+"next-mon");Y=T.nYear;S=T.nMonth}else{Y=L;S=H}}if(O===0){B.addClass(N+"sun")}if(O==6){B.addClass(N+"sat")}if(Y==V.nYear&&(S*1)==V.nMonth&&K[F]==V.nDate){B.addClass(N+"today")}U={elDate:this._aDateElement[F],elDateContainer:B.$value(),nYear:Y,nMonth:S,nDate:K[F],bPrevMonth:I,bNextMonth:G,sHTML:K[F]};jindo.$Element(U.elDate).html(U.sHTML.toString());this._aMetaData.push({nYear:Y,nMonth:S,nDate:K[F]});O=(O+1)%7;this.fireEvent("draw",U)}this.fireEvent("afterDraw",{nYear:L,nMonth:H})}},_clear:function(b){this._aMetaData=[];this._aWeekElement=[];jindo.$Element(this.elWeekAppendTarget).empty()},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},_onActivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.attach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.attach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.attach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.attach(this.elBtnNextYear,"click")}},_onDeactivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.detach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.detach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.detach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.detach(this.elBtnNextYear,"click")}}}).extend(jindo.UIComponent);jindo.Calendar.getDateObject=function(b){if(arguments.length==3){return new Date(arguments[0],arguments[1]-1,arguments[2])}return new Date(b.nYear,b.nMonth-1,b.nDate)};jindo.Calendar.getDateHashTable=function(b){if(arguments.length==3){return{nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]}}if(arguments.length<=1){b=b||new Date()}return{nYear:b.getFullYear(),nMonth:b.getMonth()+1,nDate:b.getDate()}};jindo.Calendar.getTime=function(b){return this.getDateObject(b).getTime()};jindo.Calendar.getFirstDay=function(d,c){return new Date(d,c-1,1).getDay()};jindo.Calendar.getLastDay=function(d,c){return new Date(d,c,0).getDay()};jindo.Calendar.getLastDate=function(d,c){return new Date(d,c,0).getDate()};jindo.Calendar.getWeeks=function(f,h){var g=this.getFirstDay(f,h),e=this.getLastDate(f,h);return Math.ceil((g+e)/7)};jindo.Calendar.getRelativeDate=function(h,g,e,f){return this.getDateHashTable(new Date(f.nYear+h,f.nMonth+g-1,f.nDate+e))};jindo.Calendar.isPast=function(d,c){if(this.getTime(d)<this.getTime(c)){return true}return false};jindo.Calendar.isFuture=function(d,c){if(this.getTime(d)>this.getTime(c)){return true}return false};jindo.Calendar.isSameDate=function(d,c){if(this.getTime(d)==this.getTime(c)){return true}return false};jindo.Calendar.isBetween=function(e,f,d){if(this.isFuture(e,d)||this.isPast(e,f)){return false}else{return true}};jindo.LayerManager=jindo.$Class({_bIsActivating:false,_bIsLayerVisible:false,_bIsHiding:false,_bIsShowing:false,_aLink:null,$init:function(d,c){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100,sMethod:"show",nDuration:200,Transition:{fFadeIn:jindo.Effect.cubicEaseOut,fFadeOut:jindo.Effect.cubicEaseIn,fSlideDown:jindo.Effect.cubicEaseOut,fSlideUp:jindo.Effect.cubicEaseIn}});this.option(c||{});this.setLayer(d);this._aLink=[];this._oShowTimer=new jindo.Timer();this._oHideTimer=new jindo.Timer();this._oEventTimer=new jindo.Timer();this._wfOnEvent=jindo.$Fn(this._onEvent,this);this.getVisible();this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._bIsLayerVisible=(this._wel.visible()&&this._wel.opacity()>0)},_check:function(g){var e=jindo.$Element(g);for(var h=0,f;f=this._aLink[h];h++){f=jindo.$Element(f).$value();if(f&&(g==f||e.isChildOf(f))){return true}}return false},_find:function(f){for(var d=0,e;(e=this._aLink[d]);d++){if(e==f){return d}}return -1},getLayer:function(){return this._el},setLayer:function(d){this._el=jindo.$(d);this._wel=jindo.$Element(d);var f=this._el.cloneNode(true);var e=jindo.$Element(f);e.css({position:"absolute",left:"-5000px"}).appendTo(this._el.parentNode);e.show();this._nLayerHeight=e.height();e.height(this._nLayerHeight);this._sLayerCSSHeight=e.css("height");this._sLayerCSSOverflowX=this._wel.css("overflowX");this._sLayerCSSOverflowY=this._wel.css("overflowY");e.css("overflow","hidden").height(0);this._nSlideMinHeight=e.height()+1;e.leave();return this},_transform:function(){this._wel.css({overflowX:"hidden",overflowY:"hidden"})},_restore:function(){this._wel.css({overflowX:this._sLayerCSSOverflowX,overflowY:this._sLayerCSSOverflowY})},getLinks:function(){return this._aLink},setLinks:function(a){this._aLink=jindo.$A(a).unique().$value();return this},link:function(d){if(arguments.length>1){for(var f=0,e=arguments.length;f<e;f++){this.link(arguments[f])}return this}if(this._find(d)!=-1){return this}this._aLink.push(d);return this},unlink:function(h){if(arguments.length>1){for(var g=0,e=arguments.length;g<e;g++){this.unlink(arguments[g])}return this}var f=this._find(h);if(f>-1){this._aLink.splice(f,1)}return this},_fireEventBeforeShow:function(){this._transform();return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventAppear:function(){this.fireEvent("appear",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventShow:function(){this._bIsShowing=false;this._restore();this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventBeforeHide:function(){this._transform();return this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventHide:function(){this._bIsHiding=false;this._restore();this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_show:function(c,d){this._oEventTimer.abort();this._bIsShowing=true;this._bIsHiding=false;if(d>0){this._oShowTimer.start(c,d)}else{this._oHideTimer.abort();c()}},_hide:function(c,d){this._bIsShowing=false;this._bIsHiding=true;if(d>0){this._oHideTimer.start(c,d)}else{this._oShowTimer.abort();c()}},_getShowMethod:function(){switch(this.option("sMethod")){case"show":return"showIn";case"fade":return"fadeIn";case"slide":return"slideDown"}},_getHideMethod:function(){switch(this.option("sMethod")){case"show":return"hideOut";case"fade":return"fadeOut";case"slide":return"slideUp"}},show:function(b){if(typeof b=="undefined"){b=this.option("nShowDelay")}this[this._getShowMethod()](b);return this},hide:function(b){if(typeof b=="undefined"){b=this.option("nHideDelay")}this[this._getHideMethod()](b);return this},showIn:function(d){if(typeof d=="undefined"){d=this.option("nShowDelay")}var c=this;this._show(function(){c._sAppliedMethod="show";if(!c.getVisible()){if(c._fireEventBeforeShow()){c._wel.show();c._fireEventAppear();c._fireEventShow()}}},d);return this},hideOut:function(d){if(typeof d=="undefined"){d=this.option("nHideDelay")}var c=this;this._hide(function(){c._sAppliedMethod="show";if(c.getVisible()){if(c._fireEventBeforeHide()){c._wel.hide();c._fireEventHide()}}},d);return this},_getTransition:function(){if(this._oTransition){return this._oTransition}else{return(this._oTransition=new jindo.Transition().fps(30))}},fadeIn:function(e){var f=this._getTransition();f.detachAll().abort();if(typeof e=="undefined"){e=this.option("nShowDelay")}var g=this.option("nDuration");var h=this;this._show(function(){h._sAppliedMethod="fade";var a=h.getLayer();if(!h._wel.visible()||h._wel.opacity()!=1){if(h._fireEventBeforeShow()){if(!h._wel.visible()){h._wel.opacity(0);h._wel.show()}g*=(1-h._wel.opacity());f.attach({playing:function(b){if(b.nStep===1){this.detach("playing",arguments.callee);h._fireEventAppear()}},end:function(b){this.detach("end",arguments.callee);h._fireEventShow()}}).start(g,a,{"@opacity":h.option("Transition").fFadeIn.apply(null,[1])})}}},e);return this},fadeOut:function(e){var f=this._getTransition();f.detachAll().abort();if(typeof e=="undefined"){e=this.option("nHideDelay")}var g=this.option("nDuration");var h=this;this._hide(function(){h._sAppliedMethod="fade";if(h.getVisible()){var a=h.getLayer();if(h._fireEventBeforeHide()){g*=h._wel.opacity();f.attach({end:function(b){this.detach("end",arguments.callee);h._wel.hide();h._wel.opacity(1);h._fireEventHide()}}).start(g,a,{"@opacity":h.option("Transition").fFadeOut.apply(null,[0])})}}},e);return this},slideDown:function(e){var f=this._getTransition();f.detachAll().abort();if(typeof e=="undefined"){e=this.option("nShowDelay")}var g=this.option("nDuration");var h=this;this._show(function(){h._sAppliedMethod="slide";var a=h.getLayer();if(Math.ceil(h._wel.height())<h._nLayerHeight){if(h._fireEventBeforeShow()){if(!h.getVisible()){h._wel.height(0).show()}else{g=Math.ceil(g*((h._nLayerHeight-h._wel.height())/(h._nLayerHeight-h._nSlideMinHeight)))}f.attach({playing:function(b){if(b.nStep===1){this.detach("playing",arguments.callee);h._fireEventAppear()}},end:function(b){this.detach("end",arguments.callee);h._fireEventShow()}}).start(g,{getter:function(b){return jindo.$Element(a)[b]()+1},setter:function(b,c){jindo.$Element(a)[b](parseFloat(c))}},{height:h.option("Transition").fSlideDown.apply(null,[h._nLayerHeight])})}}},e);return this},slideUp:function(e){var f=this._getTransition();f.detachAll().abort();if(typeof e=="undefined"){e=this.option("nHideDelay")}var g=this.option("nDuration");var h=this;this._hide(function(){h._sAppliedMethod="slide";var a=h.getLayer();if(h.getVisible()){if(h._fireEventBeforeHide()){g=Math.ceil(g*(h._wel.height()/h._nLayerHeight));f.attach({end:function(b){h._wel.hide().css({height:h._sLayerCSSHeight});this.detach("end",arguments.callee);h._fireEventHide()}}).start(g,{getter:function(b){return jindo.$Element(a)[b]()},setter:function(b,c){jindo.$Element(a)[b](Math.ceil(c))}},{height:h.option("Transition").fSlideUp.apply(null,[h._nSlideMinHeight])})}}},e);return this},toggle:function(b){if(!this.getVisible()||this._bIsHiding){this.show(b||this.option("nShowDelay"))}else{this.hide(b||this.option("nHideDelay"))}return this},_onEvent:function(d){var f=d.element,e=this;this._oEventTimer.start(function(){if(!e._bIsHiding&&e.getVisible()){if(e._check(f)){if(!e._bIsShowing){e.fireEvent("ignore",{sCheckEvent:e.option("sCheckEvent")});e._oHideTimer.abort();e._bIsHiding=false}}else{if(typeof f.tagName!="undefined"){e.hide()}}}},this.option("nCheckDelay"))}}).extend(jindo.UIComponent);jindo.LayerPosition=jindo.$Class({$init:function(d,e,f){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:false});this.option(f||{});this.setElement(d);if(e){this.setLayer(e)}if(d&&e){this.setPosition()}this._wfSetPosition=jindo.$Fn(function(){var a=this._elLayer;if(a&&this._welLayer.visible()){if(this.fireEvent("beforeAdjust",{elLayer:a,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})){this.setPosition();this.fireEvent("adjust",{elLayer:a,htCurrentPosition:this.getCurrentPosition()})}}},this);if(this.option("bAuto")){this._wfSetPosition.attach(window,"scroll").attach(window,"resize")}},getElement:function(){return this._el},setElement:function(b){this._el=jindo.$(b);this._wel=jindo.$Element(b);return this},getLayer:function(){return this._elLayer},setLayer:function(b){this._elLayer=jindo.$(b);this._welLayer=jindo.$Element(b);document.body.appendChild(b);return this},_isPosition:function(c,d){if(c.sPosition.indexOf(d)>-1){return true}return false},_setLeftRight:function(j,q){var p=this.getElement(),n=this.getLayer(),l=p.offsetWidth,o=n.offsetWidth;if(p==document.body){l=jindo.$Document().clientSize().width}var r=this._isPosition(j,"left"),k=this._isPosition(j,"right"),m=this._isPosition(j,"inside");if(r){if(m){q.nLeft+=j.nLeft}else{q.nLeft-=o;q.nLeft-=j.nLeft}}else{if(k){q.nLeft+=l;if(m){q.nLeft-=o;q.nLeft-=j.nLeft}else{q.nLeft+=j.nLeft}}else{if(j.sAlign=="left"){q.nLeft+=j.nLeft}if(j.sAlign=="center"){q.nLeft+=(l-o)/2}if(j.sAlign=="right"){q.nLeft+=l-o;q.nLeft-=j.nLeft}}}return q},_setVerticalAlign:function(j,i){var l=this.getElement(),g=this.getLayer(),h=l.offsetHeight,k=g.offsetHeight;if(l==document.body){h=jindo.$Document().clientSize().height}switch(j.sValign){case"top":i.nTop+=j.nTop;break;case"middle":i.nTop+=(h-k)/2;break;case"bottom":i.nTop+=h-k-j.nTop;break}return i},_adjustScrollPosition:function(d){if(this.getElement()==document.body){var c=jindo.$Document().scrollPosition();d.nTop+=c.top;d.nLeft+=c.left}return d},getPosition:function(z){if(typeof z!="object"){z=this.option()}if(typeof z.nTop=="undefined"){z.nTop=0}if(typeof z.nLeft=="undefined"){z.nLeft=0}var L,C=this._isPosition(z,"center"),E=this._isPosition(z,"inside"),D=this._isPosition(z,"top"),t=this._isPosition(z,"bottom"),y=this._isPosition(z,"left"),J=this._isPosition(z,"right");if(y){L="left"}if(J){L="right"}if(D){L="top"}if(t){L="bottom"}if(C){L="center"}var K=this.getElement(),x=jindo.$Element(K),v=this.getLayer(),A=jindo.$Element(v),G=x.offset(),F=K.offsetWidth,w=K.offsetHeight,u,I=v.offsetWidth,H=v.offsetHeight,B={nTop:G.top,nLeft:G.left};if(K==document.body){u=jindo.$Document().clientSize();F=u.width;w=u.height}I+=parseInt(A.css("marginLeft"))+parseInt(A.css("marginRight"))||0;H+=parseInt(A.css("marginTop"))+parseInt(A.css("marginBottom"))||0;switch(L){case"center":B.nTop+=(w-H)/2;B.nTop+=z.nTop;B.nLeft+=(F-I)/2;B.nLeft+=z.nLeft;break;case"top":if(E){B.nTop+=z.nTop}else{B.nTop-=z.nTop+H}B=this._setLeftRight(z,B);break;case"bottom":B.nTop+=w;if(E){B.nTop-=z.nTop+H}else{B.nTop+=z.nTop}B=this._setLeftRight(z,B);break;case"left":if(E){B.nLeft+=z.nLeft}else{B.nLeft-=z.nLeft+I}B=this._setVerticalAlign(z,B);break;case"right":B.nLeft+=F;if(E){B.nLeft-=z.nLeft+I}else{B.nLeft+=z.nLeft}B=this._setVerticalAlign(z,B);break}B=this._adjustScrollPosition(B);return B},setPosition:function(c){var d=jindo.$Element(this.getLayer());d.css("left","-9999px").css("top","0px");if(typeof c=="undefined"){c=this.getPosition()}if(this.option("bAuto")){c=this._adjustPosition(c)}d.css("left",c.nLeft+"px").css("top",c.nTop+"px");return this},getCurrentPosition:function(){var b=jindo.$Element(this.getLayer());return{nTop:parseInt(b.css("top")),nLeft:parseInt(b.css("left"))}},_isFullyVisible:function(p){var n=this.getLayer(),j=jindo.$Element(n),l=jindo.$Document().scrollPosition(),k=l.top,q=l.left,r=jindo.$Document().clientSize(),o=n.offsetWidth+(parseInt(j.css("marginLeft"))+parseInt(j.css("marginRight"))||0),m=n.offsetHeight+(parseInt(j.css("marginTop"))+parseInt(j.css("marginBottom"))||0);if(p.nLeft>=0&&p.nTop>=0&&r.width>=p.nLeft-q+o&&r.height>=p.nTop-k+m){return true}return false},_mirrorHorizontal:function(f){if(f.sAlign=="center"||f.sPosition=="inside-center"){return f}var e={};for(var d in f){e[d]=f[d]}if(this._isPosition(e,"right")){e.sPosition=e.sPosition.replace(/right/,"left")}else{if(this._isPosition(e,"left")){e.sPosition=e.sPosition.replace(/left/,"right")}else{if(e.sAlign=="right"){e.sAlign="left"}else{if(e.sAlign=="left"){e.sAlign="right"}}}}return e},_mirrorVertical:function(f){if(f.sValign=="middle"||f.sPosition=="inside-center"){return f}var e={};for(var d in f){e[d]=f[d]}if(this._isPosition(e,"top")){e.sPosition=e.sPosition.replace(/top/,"bottom")}else{if(this._isPosition(e,"bottom")){e.sPosition=e.sPosition.replace(/bottom/,"top")}else{if(e.sValign=="top"){e.sValign="bottom"}else{if(e.sValign=="bottom"){e.sValign="top"}}}}return e},_adjustPosition:function(i){var j=this.option(),g=[];g.push(i);g.push(this.getPosition(this._mirrorHorizontal(j)));g.push(this.getPosition(this._mirrorVertical(j)));g.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(j))));for(var f=0,h;h=g[f];f++){if(this._isFullyVisible(h)){i=h;break}}return i}}).extend(jindo.Component);jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null;this._nLatest=null;this._nRemained=0;this._nDelay=null;this._fRun=null;this._bIsRunning=false},start:function(c,d){this.abort();this._nRemained=0;this._nDelay=d;this._fRun=c;this._bIsRunning=true;this._nLatest=this._getTime();this.fireEvent("wait");this._excute(this._nDelay,false);return true},isRunning:function(){return this._bIsRunning},_getTime:function(){return new Date().getTime()},_clearTimer:function(){var b=false;if(this._nTimer){clearInterval(this._nTimer);this._bIsRunning=false;b=true}this._nTimer=null;return b},abort:function(){var b=this._clearTimer();if(b){this.fireEvent("abort");this._fRun=null}return b},pause:function(){var b=this._getTime()-this._nLatest;this._nRemained=Math.max(this._nDelay-b,0);return this._clearTimer()},_excute:function(d,e){var f=this;this._clearTimer();this._bIsRunning=true;this._nTimer=setInterval(function(){if(f._nTimer){f.fireEvent("run");var a=f._fRun();f._nLatest=f._getTime();if(!a){clearInterval(f._nTimer);f._nTimer=null;f._bIsRunning=false;f.fireEvent("end");return}f.fireEvent("wait");if(e){f._excute(f._nDelay,false)}}},d)},resume:function(){if(!this._fRun||this.isRunning()){return false}this._bIsRunning=true;this.fireEvent("wait");this._excute(this._nRemained,true);this._nRemained=0;return true}}).extend(jindo.Component);jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:true,_bIsPlaying:false,$init:function(b){this._aTaskQueue=[];this._oTimer=new jindo.Timer();this.option({fEffect:jindo.Effect.linear,bCorrection:false});this.option(b||{})},fps:function(b){if(arguments.length>0){this._nFPS=b;return this}return this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){this._aTaskQueue=[];this._oTimer.abort();if(this._bIsPlaying){this.fireEvent("abort")}this._bIsWaiting=true;this._bIsPlaying=false;this._htTaskToDo=null;return this},start:function(f,d,e){if(arguments.length>0){this.queue.apply(this,arguments)}this._prepareNextTask();return this},queue:function(q,r){var v;if(typeof arguments[0]=="function"){v={sType:"function",fTask:arguments[0]}}else{var n=[];var a=arguments.length;if(arguments[1] instanceof Array){n=arguments[1]}else{var p=[];jindo.$A(arguments).forEach(function(b,c){if(c>0){p.push(b);if(c%2==0){n.push(p.concat());p=[]}}})}v={sType:"task",nDuration:q,aList:[]};for(var s=0;s<n.length;s++){var t=[];var o=n[s][1];var u;for(var i in o){u=o[i];if(/^(@|style\.)(\w+)/i.test(i)){t.push(["style",RegExp.$2,u])}else{t.push(["attr",i,u])}}v.aList.push({elTarget:n[s][0],aValue:t})}}this._queueTask(v);return this},pause:function(){if(this._oTimer.abort()){this.fireEvent("pause")}return this},resume:function(){if(this._htTaskToDo){if(this._bIsWaiting===false&&this._bIsPlaying===true){this.fireEvent("resume")}this._doTask();this._bIsWaiting=false;this._bIsPlaying=true;var b=this;this._oTimer.start(function(){var a=!b._doTask();if(a){b._bIsWaiting=true;setTimeout(function(){b._prepareNextTask()},0)}return !a},this._htTaskToDo.nInterval)}return this},precede:function(f,d,e){this.start.apply(this,arguments);return this},sleep:function(c,d){if(typeof d=="undefined"){d=function(){}}this._queueTask({sType:"sleep",nDuration:c,fCallback:d});this._prepareNextTask();return this},_queueTask:function(b){this._aTaskQueue.push(b)},_dequeueTask:function(){var t=this._aTaskQueue.shift();if(t){if(t.sType=="task"){var p=t.aList;for(var q=0,i=p.length;q<i;q++){var u=p[q].elTarget;for(var r=0,s=p[q].aValue,j=s.length;r<j;r++){var v=s[r][0];var n=s[r][2];if(typeof n!="function"){if(n instanceof Array){n=this.option("fEffect")(n[0],n[1])}else{n=this.option("fEffect")(n)}}if(n.setStart){if(this._isHTMLElement(u)){var o=jindo.$Element(u);switch(v){case"style":n.setStart(o.css(s[r][1]));break;case"attr":n.setStart(o.$value()[s[r][1]]);break}}else{n.setStart(u.getter(s[r][1]))}}s[r][2]=n}}}return t}else{return null}},_prepareNextTask:function(){if(this._bIsWaiting){var g=this._dequeueTask();if(g){switch(g.sType){case"task":if(!this._bIsPlaying){this.fireEvent("start")}var e=1000/this._nFPS;var h=e/g.nDuration;this._htTaskToDo={aList:g.aList,nRatio:0,nInterval:e,nGap:h,nStep:0,nTotalStep:Math.ceil(g.nDuration/e)};this.resume();break;case"function":if(!this._bIsPlaying){this.fireEvent("start")}g.fTask();this._prepareNextTask();break;case"sleep":if(this._bIsPlaying){this.fireEvent("sleep",{nDuration:g.nDuration});g.fCallback()}var f=this;setTimeout(function(){f.fireEvent("awake");f._prepareNextTask()},g.nDuration);break}}else{if(this._bIsPlaying){this._bIsPlaying=false;this.abort();this.fireEvent("end")}}}},_isHTMLElement:function(b){return("tagName" in b)},_doTask:function(){var I=this._htTaskToDo,L=parseFloat(I.nRatio.toFixed(5),1),G=I.nStep,J=I.nTotalStep,j=I.aList,K={};var N=this.option("bCorrection");for(var y=0,C=j.length;y<C;y++){var w=j[y].elTarget;for(var z=0,x=j[y].aValue,i=x.length;z<i;z++){var H=x[z][0],E=x[z][1],M=x[z][2](L);if(this._isHTMLElement(w)){var B=jindo.$Element(w);if(N){var A=/^[0-9]*([^0-9]*)$/.test(M)&&RegExp.$1||"";if(A){var F=parseFloat(M);var D;F+=K[E]||0;F=parseFloat(F.toFixed(5));if(y==C-1){M=Math.round(F)+A}else{D=parseFloat(/(\.[0-9]+)$/.test(F)&&RegExp.$1||0);M=parseInt(F,10)+A;K[E]=D}}}switch(H){case"style":B.css(E,M);break;case"attr":B.$value()[E]=M;break}}else{w.setter(E,M)}if(this._bIsPlaying){this.fireEvent("playing",{element:w,sKey:E,sValue:M,nStep:G,nTotalStep:J})}}}I.nRatio=Math.min(I.nRatio+I.nGap,1);I.nStep+=1;return L!=1}}).extend(jindo.Component);(function(){var b=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(d,a){if(d=="opacity"){return typeof a!="undefined"?this.opacity(parseFloat(a)):this.opacity()}else{return typeof a!="undefined"?b.call(this,d,a):b.call(this,d)}}})();jindo.Effect=function(j){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var l=/^(\-?[0-9\.]+)(%|px|pt|em)?$/;var k=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i;var i=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;var g=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;var h=function(b){var a=b,c;if(l.test(b)){a=parseFloat(b);c=RegExp.$2}else{if(k.test(b)){a=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)];c="color"}else{if(i.test(b=b.replace(g,"#$1$1$2$2$3$3"))){a=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)];c="color"}}}return{nValue:a,sUnit:c}};return function(b,a){var d;if(arguments.length>1){b=h(b);a=h(a);d=a.sUnit}else{a=h(b);b=null;d=a.sUnit}if(b&&a&&b.sUnit!=a.sUnit){throw new Error("unit error")}b=b&&b.nValue;a=a&&a.nValue;var c=function(r){var f=j(r);var q=function(n,m){return(m-n)*f+n+d};if(d=="color"){var e=parseInt(q(b[0],a[0]),10)<<16;e|=parseInt(q(b[1],a[1]),10)<<8;e|=parseInt(q(b[2],a[2]),10);e=e.toString(16).toUpperCase();for(var p=0;6-e.length;p++){e="0"+e}return"#"+e}return q(b,a)};if(b===null){c.setStart=function(e){e=h(e);if(e.sUnit!=d){throw new Error("unit eror")}b=e.nValue}}return c}};jindo.Effect.linear=jindo.Effect(function(b){return b});jindo.Effect.easeIn=jindo.Effect(function(b){return(1-Math.sqrt(1-(b*b)))});jindo.Effect.easeOut=jindo.Effect(function(b){return Math.sqrt((2-b)*b)});jindo.Effect.bounce=jindo.Effect(function(b){if(b<(1/2.75)){return(7.5625*b*b)}else{if(b<(2/2.75)){return(7.5625*(b-=(1.5/2.75))*b+0.75)}else{if(b<(2.5/2.75)){return(7.5625*(b-=(2.25/2.75))*b+0.9375)}else{return(7.5625*(b-=(2.625/2.75))*b+0.984375)}}}});jindo.Effect._cubicBezier=function(e,g,f,h){return function(a){var o=3*e,c=3*(f-e)-o,t=1-o-c,p=3*g,d=3*(h-g)-p,b=1-p-d;function q(i){return((t*i+c)*i+o)*i}function r(i){return((b*i+d)*i+p)*i}function s(x,i){var j=0,k=1,m=x,w,l;for(var n=0;n<8;n++){w=q(m)-x;if(Math.abs(w)<i){return m}l=(3*t*m+2*c)*m+o;if(Math.abs(l)<0.000001){break}m=m-w/l}if(m<j){return j}if(m>k){return k}while(j<k){w=q(m);if(Math.abs(w-x)<i){return m}if(x>w){j=m}else{k=m}m=(k-j)*0.5+j}return m}return r(s(a,(1/1000)))}};jindo.Effect.cubicBezier=function(e,g,f,h){return jindo.Effect(jindo.Effect._cubicBezier(e,g,f,h))};jindo.Effect.overphase=jindo.Effect.cubicBezier(0.25,0.75,0.8,1.3);jindo.Effect.easeInOut=jindo.Effect.cubicBezier(0.75,0,0.25,1);jindo.Effect.easeOutIn=jindo.Effect.cubicBezier(0.25,0.75,0.75,0.25);jindo.Effect.cubicEase=jindo.Effect.cubicBezier(0.25,0.1,0.25,1);jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(0.42,0,1,1);jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,0.58,1);jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(0.42,0,0.58,1);jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,0.42,1,0.58);jindo.Effect.pulse=function(b){return jindo.Effect(function(a){return(-Math.cos((a*(b-0.5)*2)*Math.PI)/2)+0.5})};jindo.FileUploader=jindo.$Class({_bIsActivating:false,_aHiddenInput:[],$init:function(e,d){var f={sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"업로드가 허용되지 않는 파일형식입니다",bAutoUpload:false,bAutoReset:true,bActivateOnload:true};this.option(f);this.option(d||{});this._el=jindo.$(e);this._wel=jindo.$Element(this._el);this._elForm=this._el.form;this._aHiddenInput=[];this.constructor._oCallback={};this._wfChange=jindo.$Fn(this._onFileSelectChange,this);this._sFunctionName=null;if(this.option("bActivateOnload")){this.activate()}},_appendIframe:function(){var b="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('<iframe name="'+b+'" src="">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"});document.body.appendChild(this._welIframe.$value())},_removeIframe:function(){if(this._welIframe){this._welIframe.leave()}},getBaseElement:function(){return this.getFileSelect()},getFileSelect:function(){return this._el},getFormElement:function(){return this._elForm},upload:function(){this._appendIframe();var m=this.getFormElement(),j=jindo.$Element(m),l=this._welIframe.attr("name"),h=this._sFunctionName=l+"_func",i=this.option("sUrl");j.attr({target:l,action:i});this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")}));this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:h}));for(var n in this.option("htData")){this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:n,value:this.option("htData")[n]}))}for(var k=0;k<this._aHiddenInput.length;k++){m.appendChild(this._aHiddenInput[k])}this.constructor._oCallback[h+"_success"]=jindo.$Fn(function(a){if(this.option("bAutoReset")){this.reset()}this._revertFormAttr();this.fireEvent("success",{htResult:a});this._clear()},this).bind();this.constructor._oCallback[h+"_error"]=jindo.$Fn(function(a){if(this.option("bAutoReset")){this.reset()}this._revertFormAttr();this.fireEvent("error",{htResult:a});this._clear()},this).bind();m.submit()},reset:function(){var f=jindo.$("<form>");this._wel.wrap(f);f.reset();jindo.$Element(f).replace(this._el);var d=jindo.$Agent().navigator();if(d.ie&&d.version<=10){var e=this.getFormElement();e.type="radio";e.type="file"}this._clear();return this},_revertFormAttr:function(){var d=this.getFormElement(),c=jindo.$Element(d);c.attr({target:this._sPrevTarget,action:this._sAction})},_onActivate:function(){var d=this.getFormElement(),c=jindo.$Element(d);this._sPrevTarget=c.attr("target");this._sAction=c.attr("action");this._el.value="";this._wfChange.attach(this._el,"change")},_onDeactivate:function(){this._wfChange.detach(this._el,"change")},_makeUniqueId:function(){return new Date().getMilliseconds()+Math.floor(Math.random()*100000)},_createElement:function(i,j){var h=jindo.$("<"+i+">");var f=jindo.$Element(h);for(var g in j){f.attr(g,j[g])}return h},_checkExtension:function(h){var f=this.option("sFiletype").split(";");for(var e=0,g;e<f.length;e++){g=(f[e]=="*.*")?"*":f[e];g=g.replace(/^\s+|\s+$/,"");g=g.replace(/\./g,"\\.");g=g.replace(/\*/g,"[^\\/]+");if((new RegExp(g+"$","gi")).test(h)){return true}}return false},_onFileSelectChange:function(e){var g=e.element.value,f=this._checkExtension(g),h={sValue:g,bAllowed:f,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};if(g.length&&this.fireEvent("select",h)){if(f){if(this.option("bAutoUpload")){this.upload()}}else{alert(h.sMsgNotAllowedExt)}}},_clear:function(){if(this._sFunctionName!=null){delete this.constructor._oCallback[this._sFunctionName+"_success"];delete this.constructor._oCallback[this._sFunctionName+"_error"];this._sFunctionName=null}for(var d=0,c=this._aHiddenInput.length;d<c;d++){jindo.$Element(this._aHiddenInput[d]).leave()}this._aHiddenInput.length=0;this._removeIframe()}}).extend(jindo.UIComponent);jindo.MultipleAjaxRequest=jindo.$Class({_bIsRequesting:false,$init:function(d){var c={sMode:"parallel"};this.option(c);this.option(d)},isRequesting:function(){return this._bIsRequesting},request:function(d,c){if(this.isRequesting()){return false}if(!(d instanceof Array)){d=[d]}if(typeof c=="undefined"){c={}}this._htMetaData=c;switch(this.option("sMode")){case"parallel":this._parallelRequest(d);break;case"serial":this._serialRequest(d);break;default:return false}return true},_fireEventStart:function(){this._bIsRequesting=true;if(this.fireEvent("start",{aAjax:this._aAjax,htMetaData:this._htMetaData})){return true}else{this.abort();return false}},_fireEventBeforeEachRequest:function(b){if(this.fireEvent("beforeEachRequest",{oAjax:this._aAjax[b],nIndex:b})){return true}else{this.abort();return false}},_fireEventAfterEachResponse:function(b){if(this.fireEvent("afterEachResponse",{oAjax:this._aAjax[b],nIndex:b})){return true}else{this.abort();return false}},_parallelRequest:function(c){this._aAjaxData=c;this._aAjax=[];this._aStatus=[];this._aStatus.length=c.length;this._aResponse=[];if(this._fireEventStart()){var d=this;jindo.$A(this._aAjaxData).forEach(function(b,f){var a=function(e){e._constructor=d._aAjax[f];var h=d._findAjaxObjectIndexOfResponse(e._constructor);d._aResponse[h]=e;d._aStatus[h]=true;if(d._fireEventAfterEachResponse(h)){if(d._hasCompletedGotResponsesOfParallelResponses()){d._complete()}}};d._aAjax.push(jindo.$Ajax(b.sUrl,b.htOption));b.htOption.onload=a;b.htOption.onerror=a;b.htOption.ontimeout=a;d._aAjax[f].option(b.htOption);if(d._fireEventBeforeEachRequest(f)){d._aAjax[f].request(b.htParameter)}else{jindo.$A.Break()}})}},_findAjaxObjectIndexOfResponse:function(b){return jindo.$A(this._aAjax).indexOf(b)},_hasCompletedGotResponsesOfParallelResponses:function(){var b=true;jindo.$A(this._aStatus).forEach(function(a){if(!a){b=false;jindo.$A.Break()}});return b},_serialRequest:function(c){this._aAjaxData=c;this._aAjax=[];this._aStatus=[];this._aStatus.length=c.length;this._aResponse=[];var d=this;jindo.$A(this._aAjaxData).forEach(function(a,b){var f=function(e){e._constructor=d._aAjax[b];d._aResponse.push(e);d._serialRequestNext()};d._aAjax.push(jindo.$Ajax(a.sUrl,a.htOption));a.htOption.onload=f;a.htOption.onerror=f;a.htOption.ontimeout=f;d._aAjax[b].option(a.htOption)});if(this._fireEventStart()){if(this._fireEventBeforeEachRequest(0)){this._aAjax[0].request(this._aAjaxData[0].htParameter);this._aStatus[0]=true}}},_serialRequestNext:function(){var d=-1;for(var c=0;c<this._aStatus.length;c++){if(!this._aStatus[c]){this._aStatus[c]=true;d=c;break}}if(d>0){if(this._fireEventAfterEachResponse(d-1)){if(this._fireEventBeforeEachRequest(d)){this._aAjax[d].request(this._aAjaxData[d].htParameter)}}}else{if(d==-1){if(this._fireEventAfterEachResponse(this._aStatus.length-1)){this._complete()}}}},_reset:function(){this._aAjaxData.length=0;this._aAjax.length=0;this._aStatus.length=0;this._aResponse.length=0;this._htMetaData=null;delete this._aAjaxData;delete this._aAjax;delete this._aStatus;delete this._aResponse;delete this._htMetaData;this._bIsRequesting=false},abort:function(){jindo.$A(this._aAjax).forEach(function(b){b.abort()});this._reset()},_complete:function(){var d=this._aResponse.concat(),f={},e;for(e in this._htMetaData){f[e]=this._htMetaData[e]}this._reset();this.fireEvent("complete",{aResponse:d,htMetaData:f})}}).extend(jindo.Component);jindo.RolloverClick=jindo.$Class({$init:function(d,f){this.option({bActivateOnload:true,sCheckEvent:"click",bCheckDblClick:false,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:false,bActivateOnload:false,htStatus:{sOver:"over",sDown:"down"}}});this.option(f||{});var e=this;this._oRolloverArea=new jindo.RolloverArea(d,this.option("RolloverArea")).attach({over:function(a){if(!e.fireEvent("over",a)){a.stop()}},out:function(a){if(!e.fireEvent("out",a)){a.stop()}}});this._wfClick=jindo.$Fn(this._onClick,this);this._wfDblClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_onClick:function(e){var d=e.element,f="click";if(e.type=="dblclick"){f=e.type}while(d=this._oRolloverArea._findRollover(d)){this.fireEvent(f,{element:d,htStatus:this._oRolloverArea.option("htStatus"),weEvent:e});d=d.parentNode}},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent"));if(this.option("bCheckDblClick")){this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick")}this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent"));this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick");this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent);jindo.Pagination=jindo.$Class({$init:function(d,c){this._elPageList=jindo.$(d);this._welPageList=jindo.$Element(this._elPageList);this._waPage=jindo.$A([]);this._fClickPage=jindo.$Fn(this._onClickPageList,this);this.option({bActivateOnload:true,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:false,sInsertTextNode:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a.pre_end",this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a.pre",this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a.next",this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a.next_end",this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span.pre_end",this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span.pre",this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span.next",this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span.next_end",this._elPageList)});this.option(c||{});if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elPageList},getItemCount:function(){return this.option("nItem")},setItemCount:function(b){this.option({nItem:b})},getItemPerPage:function(){return this.option("nItemPerPage")},setItemPerPage:function(b){this.option("nItemPerPage",b)},getCurrentPage:function(){return this._nCurrentPage},getFirstItemOfPage:function(b){return this.getItemPerPage()*(b-1)+1},getPageOfItem:function(b){return Math.ceil(b/this.getItemPerPage())},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())},_getRelativePage:function(h){var j=null;if(this.option("sMoveUnit")=="page"){switch(h){case"pre":j=this.getCurrentPage()-1;break;case"next":j=this.getCurrentPage()+1;break}}else{var f=this._getPageList(this.getCurrentPage());switch(h){case"pre_end":j=1;break;case"pre":var g=(f-1)*this.option("nPagePerPageList");j=g;break;case"next":var i=(f)*this.option("nPagePerPageList")+1;j=i;break;case"next_end":j=this._getLastPage();break}}return j},_getPageList:function(f){if(this.option("bAlignCenter")){var e=Math.floor(this.option("nPagePerPageList")/2);var d=f-e;d=Math.max(d,1);d=Math.min(d,this._getLastPage());return d}return Math.ceil(f/this.option("nPagePerPageList"))},_isIn:function(d,c){if(!c){return false}return(d===c)?true:jindo.$Element(d).isChildOf(c)},_getPageElement:function(h){for(var e=0,g=this._waPage.$value().length;e<g;e++){var f=this._waPage.get(e);if(this._isIn(h,f)){return f}}return null},_onClickPageList:function(j){j.stop(jindo.$Event.CANCEL_DEFAULT);var f=null,h=this.option(),i=j.element;if(this._isIn(i,h.elFirstPageLinkOn)){f=this._getRelativePage("pre_end")}else{if(this._isIn(i,h.elPrevPageLinkOn)){f=this._getRelativePage("pre")}else{if(this._isIn(i,h.elNextPageLinkOn)){f=this._getRelativePage("next")}else{if(this._isIn(i,h.elLastPageLinkOn)){f=this._getRelativePage("next_end")}else{var g=this._getPageElement(i);if(g){f=parseInt(jindo.$Element(g).text(),10)}else{return}}}}}this.movePageTo(f)},_convertToAvailPage:function(d){var c=this._getLastPage();d=Math.max(d,1);d=Math.min(d,c);return d},movePageTo:function(d,c){if(typeof c=="undefined"){c=true}d=this._convertToAvailPage(d);this._nCurrentPage=d;if(c){if(!this.fireEvent("beforeMove",{nPage:d})){return}}this._paginate(d);if(c){this.fireEvent("move",{nPage:d})}},reset:function(b){if(typeof b=="undefined"){b=this.option("nItem")}this.setItemCount(b);this.movePageTo(1,false)},_onActivate:function(){this._fClickPage.attach(this._elPageList,"click");this.setItemCount(this.option("nItem"));this.movePageTo(this.option("nPage"),false);this._welPageList.addClass("loaded")},_onDeactivate:function(){this._fClickPage.detach(this._elPageList,"click");this._welPageList.removeClass("loaded")},_addTextNode:function(){var b=this.option("sInsertTextNode");this._elPageList.appendChild(document.createTextNode(b))},_paginate:function(D){this._empty();this._addTextNode();var x=this.option(),K=x.elFirstPageLinkOn,E=x.elPrevPageLinkOn,F=x.elNextPageLinkOn,z=x.elLastPageLinkOn,w=x.elFirstPageLinkOff,I=x.elPrevPageLinkOff,u=x.elNextPageLinkOff,C=x.elLastPageLinkOff,H=this._getLastPage(),v=this._getPageList(D),B=this._getPageList(H);if(H===0){this._welPageList.addClass("no-result")}else{if(H==1){this._welPageList.addClass("only-one")}else{this._welPageList.removeClass("only-one").removeClass("no-result")}}var i,L;if(x.bAlignCenter){var G=Math.floor(x.nPagePerPageList/2);i=D-G;i=Math.max(i,1);L=i+x.nPagePerPageList-1;if(L>H){i=H-x.nPagePerPageList+1;i=Math.max(i,1);L=H}}else{i=(v-1)*x.nPagePerPageList+1;L=(v)*x.nPagePerPageList;L=Math.min(L,H)}if(x.sMoveUnit=="page"){v=D;B=H}if(D>1){if(K){this._welPageList.append(K);this._addTextNode()}}else{if(w){this._welPageList.append(w);this._addTextNode()}}if(v>1){if(E){this._welPageList.append(E);this._addTextNode()}}else{if(I){this._welPageList.append(I);this._addTextNode()}}var J,y;for(var A=i;A<=L;A++){if(A==D){J=jindo.$(jindo.$Template(x.sCurrentPageTemplate).process({page:A.toString()}))}else{J=jindo.$(jindo.$Template(x.sPageTemplate).process({page:A.toString()}));this._waPage.push(J)}y=jindo.$Element(J);if(A==i){y.addClass(this.option("sClassFirst"))}if(A==L){y.addClass(this.option("sClassLast"))}this._welPageList.append(J);this._addTextNode()}if(v<B){if(F){this._welPageList.append(F);this._addTextNode()}}else{if(u){this._welPageList.append(u);this._addTextNode()}}if(D<H){if(z){this._welPageList.append(z);this._addTextNode()}}else{if(C){this._welPageList.append(C);this._addTextNode()}}},_empty:function(){var n=this.option(),m=n.elFirstPageLinkOn,o=n.elPrevPageLinkOn,k=n.elNextPageLinkOn,r=n.elLastPageLinkOn,q=n.elFirstPageLinkOff,j=n.elPrevPageLinkOff,p=n.elNextPageLinkOff,l=n.elLastPageLinkOff;m=this._clone(m);o=this._clone(o);r=this._clone(r);k=this._clone(k);q=this._clone(q);j=this._clone(j);l=this._clone(l);p=this._clone(p);this._waPage.empty();this._welPageList.empty()},_clone:function(b){if(b&&typeof b.cloneNode=="function"){return b.cloneNode(true)}return b}}).extend(jindo.UIComponent);jindo.DatePicker=jindo.$Class({_aDatePickerSet:[],_htSelectedDatePickerSet:null,$init:function(e,f){var d=new Date();this.htDefaultOption={bUseLayerPosition:true,Calendar:{sClassPrefix:"calendar-",nYear:d.getFullYear(),nMonth:d.getMonth()+1,nDate:d.getDate(),sTitleFormat:"yyyy-mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},LayerManager:{sCheckEvent:"click",nShowDelay:0,nHideDelay:0},LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0,bAuto:false}};this.option(this.htDefaultOption);this.option(f);this._elCalendarLayer=jindo.$(e);this._initCalendar();this._initLayerManager();this._initLayerPosition();this._wfFocusInput=jindo.$Fn(this._onFocusInput,this);this._wfClickLinkedElement=jindo.$Fn(this._onClickLinkedElement,this);this._wfMouseOverOutDate=jindo.$Fn(this._onMouseOverOutDate,this);this._wfClickDate=jindo.$Fn(this._onClickDate,this);this.activate()},addDatePickerSet:function(h){var l=this.option(),i=this.getCalendar().option(),j={nYear:i.nYear,nMonth:i.nMonth,nDate:i.nDate,bDefaultSet:true,bReadOnly:true,sDateFormat:"yyyy-mm-dd",htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31}};if(typeof h.htOption!="undefined"){for(var k in h.htOption){if(typeof j[k]!="undefined"){j[k]=h.htOption[k]}}}h.htOption=j;this._aDatePickerSet.push(h);var g=this.getLayerManager();if(typeof h.elInput!="undefined"){g.link(h.elInput);if(h.htOption.bReadOnly){h.elInput.readOnly=true}this._wfFocusInput.attach(h.elInput,"focus");this._wfClickLinkedElement.attach(h.elInput,"click")}if(typeof h.elButton!="undefined"){g.link(h.elButton);this._wfClickLinkedElement.attach(h.elButton,"click")}if(h.htOption.bDefaultSet){this._setDate(h,h.htOption)}return this},removeDatePickerSet:function(l){var g=-1;for(var k=0,h=this._aDatePickerSet.length;k<h;k++){if(this._aDatePickerSet[k].elInput==l.elInput||this._aDatePickerSet[k].elButton==l.elButton){g=k;break}}var j=this._aDatePickerSet[g];var i=this.getLayerManager();if(typeof j.elButton!="undefined"){i.unlink(j.elButton);this._wfClickLinkedElement.detach(j.elButton,"click")}if(typeof j.elInput!="undefined"){this._wfFocusInput.detach(j.elInput,"focus");this._wfClickLinkedElement.detach(j.elInput,"click");j.elInput.readOnly=false}if(j==this._htSelectedDatePickerSet){this._htSelectedDatePickerSet=null}this._aDatePickerSet.splice(k,1);return this},getDatePickerSet:function(f){if(typeof f=="undefined"){return this._aDatePickerSet}for(var d=0,e=this._aDatePickerSet.length;d<e;d++){if(this._aDatePickerSet[d].elInput==f||this._aDatePickerSet[d].elButton==f){return this._aDatePickerSet[d]}}return false},getCalendarLayer:function(){return this._elCalendarLayer},_initCalendar:function(){var b=this;this._oCalendar=new jindo.Calendar(this.getCalendarLayer(),this.option("Calendar")).attach({beforeDraw:function(a){if(!b.fireEvent("beforeDraw",a)){a.stop()}},draw:function(a){var f=this.option("sClassPrefix");var e=b._htSelectedDatePickerSet;if(b.isSelectable(e,a)){a.bSelectable=true;if(jindo.Calendar.isSameDate(a,e)){jindo.$Element(a.elDateContainer).addClass(f+"selected")}}else{a.bSelectable=false;jindo.$Element(a.elDateContainer).addClass(this.option("sClassPrefix")+"unselectable")}if(!b.fireEvent("draw",a)){a.stop()}},afterDraw:function(a){b.fireEvent("afterDraw",a)}})},getCalendar:function(){return this._oCalendar},_initLayerManager:function(){var c=this;var d=this.getCalendarLayer();this._oLayerManager=new jindo.LayerManager(d,this.option("LayerManager")).attach({hide:function(a){c._htSelectedDatePickerSet=null}}).link(d)},getLayerManager:function(){return this._oLayerManager},_initLayerPosition:function(){if(this.option("bUseLayerPosition")){this._oLayerPosition=new jindo.LayerPosition(null,this.getCalendarLayer(),this.option("LayerPosition"))}},getLayerPosition:function(){return this._oLayerPosition},getInput:function(b){return b.elInput||null},setInput:function(c,d){this._setDate(c,d)},getDate:function(b){return{nYear:b.nYear,nMonth:b.nMonth,nDate:b.nDate}},_setDate:function(c,d){c.nYear=d.nYear*1;c.nMonth=d.nMonth*1;c.nDate=d.nDate*1;if(typeof c.elInput!="undefined"){c.elInput.value=this._getDateFormat(c,d)}},isSelectable:function(c,d){return jindo.Calendar.isBetween(d,c.htOption.htSelectableDateFrom,c.htOption.htSelectableDateTo)},setDate:function(h,f){if(this.isSelectable(h,f)){var e=this._getDateFormat(h,f);var g={sText:e,nYear:f.nYear,nMonth:f.nMonth,nDate:f.nDate};if(this.fireEvent("beforeSelect",g)){this._setDate(h,f);if(this.fireEvent("select",g)){this.getLayerManager().hide()}}return true}return false},_getDateFormat:function(i,g){var l=g.nYear;var j=g.nMonth;var h=g.nDate;if(j<10){j=("0"+(j*1)).toString()}if(h<10){h=("0"+(h*1)).toString()}var k=i.htOption.sDateFormat;k=k.replace(/yyyy/g,l).replace(/y/g,(l).toString().substr(2,2)).replace(/mm/g,j).replace(/m/g,(j*1)).replace(/M/g,this.getCalendar().option("aMonthTitle")[j-1]).replace(/dd/g,h).replace(/d/g,(h*1));return k},_linkOnly:function(d){var c=this.getLayerManager();c.setLinks([this.getCalendarLayer()]);if(typeof d.elInput!="undefined"){c.link(d.elInput)}if(typeof d.elButton!="undefined"){c.link(d.elButton)}},_onActivate:function(){var b=this.getCalendarLayer();this._wfMouseOverOutDate.attach(b,"mouseover").attach(b,"mouseout");this._wfClickDate.attach(b,"click");this.getLayerManager().activate();this.getCalendar().activate()},_onDeactivate:function(){var b=this.getCalendarLayer();this._wfMouseOverOutDate.detach(b,"mouseover").detach(b,"mouseout");this._wfClickDate.detach(b,"click").detach(b,"mouseover").detach(b,"mouseout");this.getLayerManager().deactivate();this.getCalendar().deactivate()},attachEvent:function(){return this.activate()},detachEvent:function(){return this.deactivate()},addButton:function(){return this},_onFocusInput:function(b){this.fireEvent("focus")},_onClickLinkedElement:function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);if(this.fireEvent("click",{element:e.element})){var g=this.getDatePickerSet(e.currentElement);if(g){this._htSelectedDatePickerSet=g;this._linkOnly(g);if(!g.nYear){g.nYear=g.htOption.nYear}if(!g.nMonth){g.nMonth=g.htOption.nMonth}if(!g.nDate){g.nDate=g.htOption.nDate}var f=g.nYear;var h=g.nMonth;this.getCalendar().draw(f,h);this.getLayerManager().show();if(this.option("bUseLayerPosition")){if(typeof g.elLayerPosition!="undefined"){this.getLayerPosition().setElement(g.elLayerPosition).setPosition()}else{this.getLayerPosition().setElement(g.elInput).setPosition()}}}}},_getTargetDateElement:function(d){var e=this.getCalendar().option("sClassPrefix");var f=(jindo.$Element(d).hasClass(e+"date"))?d:jindo.$$.getSingle("."+e+"date",d);if(f&&(f==d||f.length==1)){return f}return null},_getTargetDateContainerElement:function(g){var h=this.getCalendar().option("sClassPrefix");var f=jindo.$$.getSingle("! ."+h+"week",g);if(f){var e=g;while(!jindo.$Element(e.parentNode).hasClass(h+"week")){e=e.parentNode}if(jindo.$Element(e).hasClass(h+"unselectable")){return null}return e}else{return null}},_onMouseOverOutDate:function(j){j.stop(jindo.$Event.CANCEL_DEFAULT);var h=this.getCalendar().option("sClassPrefix");var i=j.element;var f=this._getTargetDateContainerElement(i);if(f){var g=this.getCalendar().getDateOfElement(f);if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,g)){if(j.type=="mouseover"){if(!this._elSelected){this._elSelected=jindo.$$.getSingle("."+h+"selected",this.elWeekAppendTarget);if(this._elSelected){jindo.$Element(this._elSelected).removeClass(h+"selected")}}jindo.$Element(f).addClass(h+"over");return}if(j.type=="mouseout"){jindo.$Element(f).removeClass(h+"over");return}}else{if(this._elSelected){jindo.$Element(this._elSelected).addClass(h+"selected");this._elSelected=null}}}else{if(this._elSelected){jindo.$Element(this._elSelected).addClass(h+"selected");this._elSelected=null}}},_onClickDate:function(j){j.stop(jindo.$Event.CANCEL_DEFAULT);var i=j.element;var h=this._getTargetDateElement(i);if(h){var f=this._getTargetDateContainerElement(h);if(f){var g=this.getCalendar().getDateOfElement(f);if(this.isSelectable(this._htSelectedDatePickerSet,g)){this.setDate(this._htSelectedDatePickerSet,g)}}}}}).extend(jindo.UIComponent);jindo.StarRating=jindo.$Class({$init:function(e,d){var f={nStep:1,nMaxValue:10,nDefaultValue:0,bSnap:false,bActivateOnload:true};this.option(f);this.option(d||{});this._el=jindo.$(e);this._wel=jindo.$Element(e);this._assignHTMLElements();this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseLeave=jindo.$Fn(this._onMouseLeave,this);this._wfClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elRatingElement=jindo.$$.getSingle("span",this.getBaseElement());this._welRatingElement=jindo.$Element(this._elRatingElement)},getBaseElement:function(){return this._el},getRatingElement:function(){return this._elRatingElement},getValue:function(){return this._nValue},getValueByWidth:function(){return this._welRatingElement.width()/this._nBaseWidth*this.option("nMaxValue")},getValueToBeSet:function(b){b=this._round(b,this.option("nStep"));b=Math.min(b,this.option("nMaxValue"));b=Math.max(b,0);return b},setValue:function(e,h){if(typeof h=="undefined"){h=true}var g=this.option("nMaxValue");e=this.getValueToBeSet(e);var f=this._nBaseWidth*e/g;f=Math.min(f,this._nBaseWidth);this._welRatingElement.width(f);this._nValue=e;if(h){this.fireEvent("set",{nValue:this._nValue})}return this},reset:function(){var b=this.option("nDefaultValue")||0;this.setValue(b,false);return this},_round:function(p,j){var m=p,r=Math.floor(p),n=r+1,k=1,o,q,l;for(q=r;q<=n;q+=j){o=Math.abs(p-q);if(o<=k){k=o;m=q}}return m.toFixed(Math.max((j.toString().length-2),0))},_onActivate:function(){var b=this.getBaseElement();this._wfMouseMove.attach(b,"mousemove");this._wfMouseLeave.attach(b,"mouseleave");this._wfClick.attach(b,"click");this._nBaseWidth=this._wel.width();this.reset()},_onDeactivate:function(){var b=this.getBaseElement();this._wfMouseMove.detach(b,"mousemove");this._wfMouseLeave.detach(b,"mouseleave");this._wfClick.detach(b,"click")},_onMouseMove:function(g){var f=g.pos(true).offsetX+1,e=(f>this._nBaseWidth)?this._nBaseWidth:f,h;if(this.option("bSnap")){h=f/this._nBaseWidth*this.option("nMaxValue");e=this._round(h,this.option("nStep"))*this._nBaseWidth/this.option("nMaxValue");e=Math.min(e,this._nBaseWidth)}this._welRatingElement.css("width",e+"px");h=this.getValueByWidth();this.fireEvent("move",{nValue:h,nValueToBeSet:this.getValueToBeSet(h)})},_onMouseLeave:function(b){this.setValue(this._nValue,false);this.fireEvent("out")},_onClick:function(b){this.setValue(this.getValueByWidth())}}).extend(jindo.UIComponent);jindo.DragArea=jindo.$Class({$init:function(d,c){this.option({sClassName:"draggable",bFlowOut:true,bSetCapture:true,nThreshold:0});this.option(c||{});this._el=d;this._bIE=jindo.$Agent().navigator().ie;this._htDragInfo={bIsDragging:false,bPrepared:false,bHandleDown:false,bForceDrag:false};this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this);this.activate()},_findDraggableElement:function(j){if(j.nodeType===1&&jindo.$$.test(j,"input[type=text], textarea, select")){return null}var g=this;var h="."+this.option("sClassName");var i=function(a){if(a===null){return false}if(g._el===document||g._el===a){return true}return jindo.$Element(g._el).isParentOf(a)};var f=jindo.$$.test(j,h)?j:jindo.$$.getSingle("! "+h,j);if(!i(f)){f=null}return f},isDragging:function(){var b=this._htDragInfo;return b.bIsDragging&&!b.bPrepared},stopDragging:function(){this._stopDragging(true);return this},_stopDragging:function(e){this._wfOnMouseMove.detach(document,"mousemove");this._wfOnMouseUp.detach(document,"mouseup");if(this.isDragging()){var d=this._htDragInfo,f=jindo.$Element(d.elDrag);d.bIsDragging=false;d.bForceDrag=false;d.bPrepared=false;if(this._bIE&&this._elSetCapture){this._elSetCapture.releaseCapture();this._elSetCapture=null}this.fireEvent("dragEnd",{elArea:this._el,elHandle:d.elHandle,elDrag:d.elDrag,nX:parseInt(f.css("left"),10)||0,nY:parseInt(f.css("top"),10)||0,bInterupted:e})}},_onActivate:function(){this._wfOnMouseDown.attach(this._el,"mousedown");this._wfOnDragStart.attach(this._el,"dragstart");this._wfOnSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wfOnMouseDown.detach(this._el,"mousedown");this._wfOnDragStart.detach(this._el,"dragstart");this._wfOnSelectStart.detach(this._el,"selectstart")},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},isEventAttached:function(){return this.isActivating()},startDragging:function(c){var d=this._findDraggableElement(c);if(d){this._htDragInfo.bForceDrag=true;this._htDragInfo.bPrepared=true;this._htDragInfo.elHandle=d;this._htDragInfo.elDrag=d;this._wfOnMouseMove.attach(document,"mousemove");this._wfOnMouseUp.attach(document,"mouseup");return true}return false},_onMouseDown:function(j){var f=j.mouse(true);if(!f.left||f.right||f.scrollbar){this._stopDragging(true);return}var h=this._findDraggableElement(j.element);if(h){var g=j.pos(),i=this._htDragInfo;i.bHandleDown=true;i.bPrepared=true;i.nButton=j._event.button;i.elHandle=h;i.elDrag=h;i.nPageX=g.pageX;i.nPageY=g.pageY;if(this.fireEvent("handleDown",{elHandle:h,elDrag:h,weEvent:j})){this._wfOnMouseMove.attach(document,"mousemove")}this._wfOnMouseUp.attach(document,"mouseup");j.stop(jindo.$Event.CANCEL_DEFAULT)}},_onMouseMove:function(F){var u=this._htDragInfo,H,t,y=F.pos(),B={nX:y.pageX-u.nPageX,nY:y.pageY-u.nPageY};if(u.bPrepared){var w=this.option("nThreshold"),r={};if(!u.bForceDrag&&w){r.nPageX=y.pageX-u.nPageX;r.nPageY=y.pageY-u.nPageY;var E=Math.sqrt(r.nPageX*r.nPageX+r.nPageY*r.nPageY);if(w>E){return}}if(this._bIE&&this.option("bSetCapture")){this._elSetCapture=(this._el===document)?document.body:this._findDraggableElement(F.element);if(this._elSetCapture){this._elSetCapture.setCapture(false)}}H={elArea:this._el,elHandle:u.elHandle,elDrag:u.elDrag,htDiff:r,weEvent:F};u.bIsDragging=true;u.bPrepared=false;if(this.fireEvent("dragStart",H)){var s=jindo.$Element(H.elDrag),z=s.offset();u.elHandle=H.elHandle;u.elDrag=H.elDrag;u.nX=parseInt(s.css("left"),10)||0;u.nY=parseInt(s.css("top"),10)||0;u.nClientX=z.left+s.width()/2;u.nClientY=z.top+s.height()/2}else{u.bPrepared=true;return}}if(u.bForceDrag){B.nX=y.clientX-u.nClientX;B.nY=y.clientY-u.nClientY}H={elArea:this._el,elFlowOut:u.elDrag.parentNode,elHandle:u.elHandle,elDrag:u.elDrag,weEvent:F,nX:u.nX+B.nX,nY:u.nY+B.nY,nGapX:B.nX,nGapY:B.nY};if(this.fireEvent("beforeDrag",H)){var C=u.elDrag;if(this.option("bFlowOut")===false){var D=H.elFlowOut,v=[C.offsetWidth,C.offsetHeight],G=0,A=0;if(D==document.body){D=null}if(D&&v[0]<=D.scrollWidth&&v[1]<=D.scrollHeight){t={nWidth:D.clientWidth,nHeight:D.clientHeight};G=D.scrollLeft;A=D.scrollTop}else{var x=jindo.$Document().clientSize();t={nWidth:x.width,nHeight:x.height}}if(H.nX!==null){H.nX=Math.max(H.nX,G);H.nX=Math.min(H.nX,t.nWidth-v[0]+G)}if(H.nY!==null){H.nY=Math.max(H.nY,A);H.nY=Math.min(H.nY,t.nHeight-v[1]+A)}}if(H.nX!==null){C.style.left=H.nX+"px"}if(H.nY!==null){C.style.top=H.nY+"px"}this.fireEvent("drag",H)}else{u.bIsDragging=false}},_onMouseUp:function(d){this._stopDragging(false);var c=this._htDragInfo;c.bHandleDown=false;this.fireEvent("handleUp",{weEvent:d,elHandle:c.elHandle,elDrag:c.elDrag})},_onDragStart:function(b){if(this._findDraggableElement(b.element)){b.stop(jindo.$Event.CANCEL_DEFAULT)}},_onSelectStart:function(b){if(this.isDragging()||this._findDraggableElement(b.element)){b.stop(jindo.$Event.CANCEL_DEFAULT)}}}).extend(jindo.UIComponent);jindo.DefaultTextValue=jindo.$Class({$init:function(d,c){this.option({sValue:"",bActivateOnload:true});this.option(c||{});this._elBaseTarget=jindo.$(d);this._wfOnFocusAndBlur=jindo.$Fn(this._onFocusAndBlur,this);if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elBaseTarget},setDefault:function(){this.getBaseElement().value=this.option("sValue");return this},setDefaultValue:function(c){var d=this.option("sValue");this.option("sValue",c);if(this.getBaseElement().value==d){this.setDefault()}return this},getDefaultValue:function(){return this.option("sValue")},paint:function(){return this},_onActivate:function(){var b=this.getBaseElement();if(b.value==""){this.setDefault()}this._wfOnFocusAndBlur.attach(b,"focus").attach(b,"blur")},_onDeactivate:function(){var b=this.getBaseElement();this._wfOnFocusAndBlur.detach(b,"focus").detach(b,"blur")},_onFocusAndBlur:function(e){var d=this._elBaseTarget;var f=d.value;switch(e.type){case"focus":if(f==this.getDefaultValue()){d.value="";d.select()}break;case"blur":if(jindo.$S(f).trim().$value()==""){this.setDefault()}break}}}).extend(jindo.UIComponent);jindo.NumericStepper=jindo.$Class({_bIsOnFocus:false,$init:function(d,c){this._el=jindo.$(d);this.option({sClassPrefix:"ns-",bActivateOnload:true,bUseMouseWheel:false,nStep:1,nDecimalPoint:0,nMin:-Infinity,nMax:Infinity,nDefaultValue:0,bInputReadOnly:true});this.option(c||{});this._assignHTMLElements();this._initEventHandlers();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var b=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+b+"input",this._el);this._elPlusButton=jindo.$$.getSingle("."+b+"plus",this._el);this._elMinusButton=jindo.$$.getSingle("."+b+"minus",this._el)},_initEventHandlers:function(){this._wfPlusClick=jindo.$Fn(this._onPlusClick,this);this._wfMinusClick=jindo.$Fn(this._onMinusClick,this);this._wfWheel=jindo.$Fn(this._onWheel,this);this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)},setValue:function(g){g=g.toFixed(this.option("nDecimalPoint"));var f=this.option("nMin"),e=this.option("nMax"),h={nValue:g,nMin:f,nMax:e};if(g>e||g<f){this.fireEvent("overLimit",h);return}if(!this.fireEvent("beforeChange",h)){return}this._elInput.value=h.nValue;this.fireEvent("change",h)},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var b=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click");this._wfMinusClick.attach(this.getMinusElement(),"click");this._wfFocus.attach(b,"focus");this._wfBlur.attach(b,"blur");if(this.option("bUseMouseWheel")){this._wfWheel.attach(b,"mousewheel")}this._elInput.readOnly=this.option("bInputReadOnly");this.reset()},_onDeactivate:function(){var b=this.getInputElement();this._wfPlusClick.detach(this.getPlusElement(),"click");this._wfMinusClick.detach(this.getMinusElement(),"click");this._wfInputClick.detach(b,"click");this._wfFocus.detach(b,"focus");this._wfBlur.detach(b,"blur");this._wfWheel.detach(b,"mousewheel")},_onMinusClick:function(b){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(b){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(b){if(this.isFocused()){b.stop(jindo.$Event.CANCEL_DEFAULT);if(b.mouse().delta>0){this._onPlusClick()}else{this._onMinusClick()}}},_onFocus:function(b){this._bIsOnFocus=true},_onBlur:function(b){this._bIsOnFocus=false;this.setValue(this.getValue());this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent);jindo.LazyLoading={_waLoading:jindo.$A([]),_waLoaded:jindo.$A([]),_whtScript:jindo.$H({}),_whtCallback:jindo.$H({})};jindo.LazyLoading.load=function(k,i,j){if(typeof i!="function"){i=function(){}}this._queueCallback(k,i);if(this._checkIsLoading(k)){return false}if(this._checkAlreadyLoaded(k)){this._doCallback(k);return true}this._waLoading.push(k);var g=this;var h=document.getElementsByTagName("head")[0];var l=document.createElement("script");l.type="text/javascript";l.charset=j||"utf-8";l.src=k;this._whtScript.add(k,l);if("onload" in l){l.onload=function(){g._waLoaded.push(k);g._waLoading=g._waLoading.refuse(k);g._doCallback(k)}}else{l.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){g._waLoaded.push(k);g._waLoading=g._waLoading.refuse(k);g._doCallback(k);this.onreadystatechange=null}}}h.appendChild(l);return true};jindo.LazyLoading._queueCallback=function(d,f){var e=this._whtCallback.$(d);if(e){e.push(f)}else{this._whtCallback.$(d,[f])}};jindo.LazyLoading._doCallback=function(f){var e=this._whtCallback.$(f).concat();for(var d=0;d<e.length;d++){this._whtCallback.$(f).splice(d,1);e[d]()}};jindo.LazyLoading.abort=function(c){if(this._checkIsLoading(c)){var d=this.getScriptElement(c);this._waLoading=this._waLoading.refuse(c);if("onload" in d){d.onload=null}else{d.onreadystatechange=null}jindo.$Element(d).leave();this._whtScript.remove(c);this._whtCallback.remove(c);return true}else{return false}};jindo.LazyLoading._checkAlreadyLoaded=function(b){return this._waLoaded.has(b)};jindo.LazyLoading._checkIsLoading=function(b){return this._waLoading.has(b)};jindo.LazyLoading.getLoaded=function(){return this._waLoaded.$value()};jindo.LazyLoading.getLoading=function(){return this._waLoading.$value()};jindo.LazyLoading.getScriptElement=function(b){return this._whtScript.$(b)||null};